<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Mean Cumulative Count (MCC) — mcc • mccount</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Mean Cumulative Count (MCC) — mcc"><meta name="description" content="Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the &quot;equation&quot; method and
the sum of cumulative incidence (&quot;sci&quot;) method.
The &quot;equation&quot; method calculates MCC directly through probability
calculations, while the &quot;sci&quot; method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depe#' Calculate Mean Cumulative Count (MCC)
Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the &quot;equation&quot; method and
the sum of cumulative incidence (&quot;sci&quot;) method.
The &quot;equation&quot; method calculates MCC directly through probability
calculations, while the &quot;sci&quot; method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depends on the specific outcome, analysis needs, and data
structure."><meta property="og:description" content="Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the &quot;equation&quot; method and
the sum of cumulative incidence (&quot;sci&quot;) method.
The &quot;equation&quot; method calculates MCC directly through probability
calculations, while the &quot;sci&quot; method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depe#' Calculate Mean Cumulative Count (MCC)
Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the &quot;equation&quot; method and
the sum of cumulative incidence (&quot;sci&quot;) method.
The &quot;equation&quot; method calculates MCC directly through probability
calculations, while the &quot;sci&quot; method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depends on the specific outcome, analysis needs, and data
structure."><meta property="og:image" content="https://kennethataylor.github.io/mccount/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mccount</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/KennethATaylor/mccount/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Calculate Mean Cumulative Count (MCC)</h1>
      <small class="dont-index">Source: <a href="https://github.com/KennethATaylor/mccount/blob/HEAD/R/mcc.R" class="external-link"><code>R/mcc.R</code></a></small>
      <div class="d-none name"><code>mcc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the <code>"equation"</code> method and
the sum of cumulative incidence (<code>"sci"</code>) method.</p>
<p>The <code>"equation"</code> method calculates MCC directly through probability
calculations, while the <code>"sci"</code> method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depe#' Calculate Mean Cumulative Count (MCC)</p>
<p>Calculates the Mean Cumulative Count (MCC), which estimates the expected
cumulative number of events per person over time, while accounting for
potential competing risks and censoring. This function provides a unified
interface to two different estimation approaches: the <code>"equation"</code> method and
the sum of cumulative incidence (<code>"sci"</code>) method.</p>
<p>The <code>"equation"</code> method calculates MCC directly through probability
calculations, while the <code>"sci"</code> method derives MCC by summing the cumulative
incidence functions for each recurrent event. The two approaches yield
equivalent results in certain circumstances. When they do not, the choice
between methods depends on the specific outcome, analysis needs, and data
structure.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mcc</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">id_var</span>,</span>
<span>  <span class="va">time_var</span>,</span>
<span>  <span class="va">cause_var</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"equation"</span>, <span class="st">"sci"</span><span class="op">)</span>,</span>
<span>  tstart_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjust_times <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_precision <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  include_details <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>(<code>data.frame</code> or <code>tbl_df</code>)<br>
A <code>data.frame</code> or tibble containing the required variables</p></dd>


<dt id="arg-id-var">id_var<a class="anchor" aria-label="anchor" href="#arg-id-var"></a></dt>
<dd><p>(<code>string</code>)<br>
Name of the column containing participant identifiers</p></dd>


<dt id="arg-time-var">time_var<a class="anchor" aria-label="anchor" href="#arg-time-var"></a></dt>
<dd><p>(<code>string</code>)<br>
Name of the column containing follow-up times</p></dd>


<dt id="arg-cause-var">cause_var<a class="anchor" aria-label="anchor" href="#arg-cause-var"></a></dt>
<dd><p>(<code>string</code>)<br>
Name of the column containing event indicator values (1 = event of
interest, 2 = competing risk, 0 = censoring)</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>(<code>string</code>, optional)<br>
Name of the column to group by for calculating MCC within subgroups.
If provided, MCC will be calculated separately for each level of this
variable</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>(<code>string</code>)<br>
Method to use for MCC calculation. Either <code>"equation"</code> (default) or
<code>"sci"</code> (sum of cumulative incidence)</p></dd>


<dt id="arg-tstart-var">tstart_var<a class="anchor" aria-label="anchor" href="#arg-tstart-var"></a></dt>
<dd><p>(<code>string</code>)<br>
Name of the column containing start times of follow-up for incorporating
left truncation. Only allowed to be specified when <code>method = "sci"</code>. If
<code>NULL</code> (default), a constant value of <code>0</code> is used in calculation (i.e.,
right truncation only)</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>(<code>string</code>, optional)<br>
Name of the column containing weights for weighted MCC estimation.
Currently only supported with <code>method = "equation"</code>.
If provided, all weights must be non-negative and non-missing</p></dd>


<dt id="arg-adjust-times">adjust_times<a class="anchor" aria-label="anchor" href="#arg-adjust-times"></a></dt>
<dd><p>(<code>logical</code>)<br>
If <code>TRUE</code> (default), automatically adjusts times to account for outcome
events and competing risk events occurring at the same time</p></dd>


<dt id="arg-time-precision">time_precision<a class="anchor" aria-label="anchor" href="#arg-time-precision"></a></dt>
<dd><p>(<code>numeric</code>)<br>
Precision used for adjusting simultaneous events (default: 1e-6). Must
be a positive numeric value</p></dd>


<dt id="arg-include-details">include_details<a class="anchor" aria-label="anchor" href="#arg-include-details"></a></dt>
<dd><p>(<code>logical</code>)<br>
Whether to include detailed calculation tables and intermediate objects
in the output. Default is <code>TRUE</code>, which returns all calculation details.
Setting to <code>FALSE</code> returns only the final MCC estimates, making the
function more efficient for bootstrapping</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An S3 object of class <code>"mcc"</code> with method-specific subclasses. The object contains:</p>
<p>When <code>include_details = TRUE</code> (default):</p>
<p>For <code>method = "equation"</code>:</p><ul><li><p><code>mcc_final</code>: A tibble with columns for <code>time</code> and <code>mcc</code></p></li>
<li><p><code>mcc_table</code>: A tibble with detailed calculation steps</p></li>
<li><p><code>original_data</code>: The input <code>data</code> with standardized column names</p></li>
<li><p><code>adjusted_data</code>: Present only if time adjustments were applied</p></li>
</ul><p>For <code>method = "sci"</code>:</p><ul><li><p><code>mcc_final</code>: A tibble with columns for <code>time</code> and MCC (expressed as <code>SumCIs</code>)</p></li>
<li><p><code>sci_table</code>: A tibble with cumulative incidence for each event number and their sum</p></li>
<li><p><code>all_cis</code>: A list of cumulative incidence data for each event number</p></li>
<li><p><code>mcc_base</code>: A tibble with calculation details for the MCC</p></li>
<li><p><code>original_data</code>: The input <code>data</code> with standardized column names</p></li>
<li><p><code>adjusted_data</code>: Present only if time adjustments were applied</p></li>
</ul><p>When <code>include_details = FALSE</code>:</p><ul><li><p><code>mcc_final</code>: A tibble with columns for <code>time</code> and <code>mcc</code> (or <code>SumCIs</code> for <code>method = "sci"</code>)</p></li>
</ul><p>All objects include metadata:</p><ul><li><p><code>method</code>: The method used for calculation</p></li>
<li><p><code>weighted</code>: Logical indicating whether weighted estimation was used</p></li>
<li><p><code>by_group</code>: Name of grouping variable (for grouped analyses)</p></li>
<li><p><code>call</code>: The original function call</p></li>
</ul><p>When <code>by</code> is specified, all tibbles contain an additional column with the
grouping variable values, and the object has the additional class <code>"mcc_grouped"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Dong H, Robison LL, Leisenring WM, Martin LJ, Armstrong GT, Yasui Y.
Estimating the burden of recurrent events in the presence of competing
risks: the method of mean cumulative count. <em>Am J Epidemiol</em>. 2015 Apr
1;181(7):532-40. doi: <a href="https://doi.org/10.1093/aje/kwu289" class="external-link">10.1093/aje/kwu289</a></p>
<p>Gaber CE, Edwards JK, Lund JL, Peery AF, Richardson DB, Kinlaw AC.
Inverse Probability Weighting to Estimate Exposure Effects on the Burden of
Recurrent Outcomes in the Presence of Competing Events. <em>Am J Epidemiol</em>.
2023;192(5):830-839. doi: <a href="https://doi.org/10.1093/aje/kwad031" class="external-link">10.1093/aje/kwad031</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Attach dplyr</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Create sample data with recurrent events</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>, <span class="co"># Times will be adjusted for id = 5</span></span></span>
<span class="r-in"><span>  cause <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">time</span><span class="op">)</span>  <span class="co"># Sort the data by id and time</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print the dataset</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Hypothetical dataset from Dong et al. (2015):"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Hypothetical dataset from Dong et al. (2015):"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id time cause</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1    8     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2    1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3    5     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  4    2     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  4    6     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  4    7     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  5    3     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  5    3     2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate MCC using the equation method</span></span></span>
<span class="r-in"><span><span class="va">mcc_eq</span> <span class="op">&lt;-</span> <span class="fu">mcc</span><span class="op">(</span><span class="va">df</span>, id_var <span class="op">=</span> <span class="st">"id"</span>, time_var <span class="op">=</span> <span class="st">"time"</span>, cause_var <span class="op">=</span> <span class="st">"cause"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Found 1 `id_var` where last observation is an event of interest (`cause_var` =</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> 1)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> ID: 4</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> `mcc()` implicitly assumes these `id_var`s are censored at the maximum</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `time_var` This may impact MCC calculations if these participants were</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   actually censored or experienced competing risk before the maximum value of</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `time_var`</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> If this implicit assumption is incorrect, estimates will be incorrect unless</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   you add an additional row after the current last row with the censoring or</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   competing risk event</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Adjusted time points for events occurring simultaneously for the same subject.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print the S3 object</span></span></span>
<span class="r-in"><span><span class="va">mcc_eq</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Mean Cumulative Count Results</span> <span style="color: #00BBBB;">───────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Method: Dong-Yasui Equation Method</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">MCC Estimates</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    time   mcc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0  0   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     2  0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     3  0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     7  1   </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Call</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">mcc</span><span style="color: #D7AF00;">(</span>data = df, id_var = <span style="color: #00AFAF;">"id"</span>, time_var = <span style="color: #00AFAF;">"time"</span>, cause_var = <span style="color: #00AFAF;">"cause"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get summary</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mcc_eq</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary of Mean Cumulative Count Results</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Method: Dong-Yasui Equation Method</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Summary Statistics</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Number of time points: 5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Time range: [0, 7]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Final MCC: 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract MCC estimates</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mcc_estimates.html">mcc_estimates</a></span><span class="op">(</span><span class="va">mcc_eq</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    time   mcc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0  0   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     2  0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     3  0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     7  1   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract calculation details</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mcc_details.html">mcc_details</a></span><span class="op">(</span><span class="va">mcc_eq</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    time nrisk censor event cmprk overall_surv_previous ave_events   mcc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  0        5      0     0     0                  1          0     0   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  1        5      1     0     0                  1          0     0   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  2        4      0     1     0                  1          0.25  0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>  3        4      0     1     0                  1          0.25  0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>  3.00     4      0     0     1                  1          0     0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>  5        3      0     0     1                  0.75       0     0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>  6        2      0     1     0                  0.5        0.25  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span>  7        2      1     1     0                  0.5        0.25  1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span>  8        1      1     0     0                  0.5        0     1   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate MCC using the sum of cumulative incidence method</span></span></span>
<span class="r-in"><span><span class="va">mcc_sci</span> <span class="op">&lt;-</span> <span class="fu">mcc</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>,</span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>  time_var <span class="op">=</span> <span class="st">"time"</span>,</span></span>
<span class="r-in"><span>  cause_var <span class="op">=</span> <span class="st">"cause"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"sci"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Found 1 `id_var` where last observation is an event of interest (`cause_var` =</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> 1)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> ID: 4</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> `mcc()` implicitly assumes these `id_var`s are censored at the maximum</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `time_var` This may impact MCC calculations if these participants were</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   actually censored or experienced competing risk before the maximum value of</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `time_var`</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> If this implicit assumption is incorrect, estimates will be incorrect unless</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   you add an additional row after the current last row with the censoring or</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   competing risk event</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Adjusted time points for events occurring simultaneously for the same subject.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mcc_sci</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Mean Cumulative Count Results</span> <span style="color: #00BBBB;">───────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Method: Sum of Cumulative Incidence Method</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">MCC Estimates</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    time SumCIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0   0   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     2   0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     3   0.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6   0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     7   1   </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Call</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">mcc</span><span style="color: #D7AF00;">(</span>data = df, id_var = <span style="color: #00AFAF;">"id"</span>, time_var = <span style="color: #00AFAF;">"time"</span>, cause_var = <span style="color: #00AFAF;">"cause"</span>, </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     method = <span style="color: #00AFAF;">"sci"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean up</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">mcc_eq</span>, <span class="va">mcc_sci</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kenneth A. Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

