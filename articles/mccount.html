<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to mccount • mccount</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to mccount">
<meta name="description" content="Learn how to get started with the basics of mccount.
">
<meta property="og:description" content="Learn how to get started with the basics of mccount.
">
<meta property="og:image" content="https://kennethataylor.github.io/mccount/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mccount</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/mccount.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/choosing-between-methods.html">Choosing Between Methods</a></li>
    <li><a class="dropdown-item" href="../articles/estimating-mcc-after-matching-or-weighting.html">Estimating MCC After Matching or Weighting</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/KennethATaylor/mccount/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to mccount</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/KennethATaylor/mccount/blob/HEAD/vignettes/articles/mccount.Rmd" class="external-link"><code>vignettes/articles/mccount.Rmd</code></a></small>
      <div class="d-none name"><code>mccount.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When studying diseases and medical interventions, patients often
experience events that can occur multiple times (e.g., hospitalizations,
infections, or tumor recurrences). Traditional survival analysis methods
typically focus on time to the <em>first</em> event, potentially missing
important information about the total disease burden.</p>
<p>Many patients experience events that can occur multiple times—like
hospital readmissions, infections, or tumor recurrences. Traditional
survival analysis is only concerned with the first event and does not
account for competing risks like death. Alternatively, the mean
cumulative count (MCC) provides a more complete picture by estimating
the expected number of events per person by a given time, properly
accounting for:</p>
<ul>
<li>Multiple occurrences of the same event (recurrent events)</li>
<li>Events that prevent future occurrences (competing risks like
death)</li>
<li>Incomplete follow-up (censoring)</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/KennethATaylor/mccount" class="external-link">mccount</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="clinical-example-bladder-cancer-recurrences">Clinical Example: Bladder Cancer Recurrences<a class="anchor" aria-label="anchor" href="#clinical-example-bladder-cancer-recurrences"></a>
</h2>
<p>We’ll use the <code><a href="https://rdrr.io/pkg/survival/man/bladder.html" class="external-link">survival::bladder1</a></code> dataset from the
<a href="https://github.com/therneau/survival" class="external-link">survival</a> package, which contains data on bladder cancer
recurrences from a randomized trial comparing three treatments:
<code>placebo</code>, <code>pyridoxine</code>, and
<code>thiotepa</code>.</p>
<p>The <code>bladder1</code> dataset contains 118 patients followed for
tumor recurrences. The key variables are:</p>
<ul>
<li>
<code>id</code>: Patient identifier</li>
<li>
<code>stop</code>: Time of event or censoring</li>
<li>
<code>status</code>: Event type (0 = censored, 1 = recurrence, 2 =
death from bladder disease, 3 = death from other cause)</li>
<li>
<code>treatment</code>: Treatment group (placebo, pyridoxine, or
thiotepa)</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>For MCC analysis, we need to ensure our competing event variable has
the proper coding:</p>
<ul>
<li>
<code>0</code> = censoring</li>
<li>
<code>1</code> = event of interest (recurrence)</li>
<li>
<code>2</code> = competing event (death from any cause)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data for MCC analysis</span></span>
<span><span class="va">bladder_mcc</span> <span class="op">&lt;-</span> <span class="va">bladder1</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Combine death causes into a single competing event indicator</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>status <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">status</span> <span class="op">&gt;=</span> <span class="fl">2</span>, <span class="fl">2</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-mcc-analysis">Basic MCC Analysis<a class="anchor" aria-label="anchor" href="#basic-mcc-analysis"></a>
</h2>
<p>Let’s calculate the MCC of bladder cancer recurrences for the entire
cohort:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate MCC using the Dong-Yasui equation method</span></span>
<span><span class="va">mcc_overall</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcc.html">mcc</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bladder_mcc</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  time_var <span class="op">=</span> <span class="st">"stop"</span>,</span>
<span>  cause_var <span class="op">=</span> <span class="st">"status"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Found 13 participants where last observation is an event of interest</span></span>
<span><span class="co">#&gt; (`cause_var` = 1)</span></span>
<span><span class="co">#&gt; First 5 IDs: 13, 15, 16, 19, 24</span></span>
<span><span class="co">#&gt; Total affected: 13 participants</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `mcc()` assumes these participants are censored at their final `time_var`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> If participants were actually censored or experienced competing risks after</span></span>
<span><span class="co">#&gt;   their last event, add those observations to ensure correct estimates</span></span></code></pre></div>
<p>Notice that <code><a href="../reference/mcc.html">mcc()</a></code> will warn the user if there are
participants whose data end do not explicitly have a censoring event
(<code>0</code>) of competing event (<code>2</code>) on their final row.
The function provides this warning to ensure the user is aware of this
and also aware of how this is implicitly interpreted by the package. The
function also lets the user know that the MCC estimate will be incorrect
if the <code>mccount</code>’s implicit assumption is incorrect.</p>
<div class="section level3">
<h3 id="available-estimators">Available Estimators<a class="anchor" aria-label="anchor" href="#available-estimators"></a>
</h3>
<p>The <code><a href="../reference/mcc.html">mcc()</a></code> function can be used to calculate the MCC
using either the Dong-Yasui estimator (<code>method = "equation"</code>,
the default) or the sum of cumulative incidence estimator
(<code>method = "sci"</code>). See
<code><a href="../articles/choosing-between-methods.html">vignette("choosing-between-methods")</a></code> and <code><a href="../reference/mcc.html">?mcc</a></code>
for more details.</p>
</div>
<div class="section level3">
<h3 id="understanding-the-output">Understanding the Output<a class="anchor" aria-label="anchor" href="#understanding-the-output"></a>
</h3>
<p>Just calling the <code>mcc</code> object we’ve created will print the
method used, a preview of the MCC estimates at each time point, and the
exact <code><a href="../reference/mcc.html">mcc()</a></code> call used to generate the output:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mcc_overall</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Mean Cumulative Count Results</span> <span style="color: #00BBBB;">───────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Method: <span style="color: #0000BB;">Dong-Yasui Equation Method</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">MCC Estimates</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;    time    mcc</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     0 0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 0.025<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     2 0.112 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     3 0.241 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     4 0.276 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     5 0.320</span></span>
<span><span class="co">#&gt; # ... with <span style="color: #0000BB;">45</span> more rows</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Call</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">mcc</span><span style="color: #D7AF00;">(</span>data = bladder_mcc, id_var = <span style="color: #00AFAF;">"id"</span>, time_var = <span style="color: #00AFAF;">"stop"</span>, cause_var = <span style="color: #00AFAF;">"status"</span><span style="color: #D7AF00;">)</span></span></span></code></pre></div>
<p>The package also includes an S3 method for the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
function that will output more useful details:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get summary statistics</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mcc_overall</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary of Mean Cumulative Count Results</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Method: <span style="color: #0000BB;">Dong-Yasui Equation Method</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Total participants: <span style="color: #0000BB;">118</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary Statistics</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Observation period: [<span style="color: #0000BB;">0</span>, <span style="color: #0000BB;">64</span>]</span></span>
<span><span class="co">#&gt; Time to MCC = 1.0: <span style="color: #0000BB;">22</span></span></span>
<span><span class="co">#&gt; Time to maximum MCC: <span style="color: #0000BB;">53</span></span></span>
<span><span class="co">#&gt; MCC at end of follow-up: <span style="color: #0000BB;">2.2672</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Event Count Composition</span></span>
<span><span class="co">#&gt; Events of interest: <span style="color: #0000BB;">189</span></span></span>
<span><span class="co">#&gt; Competing risk events: <span style="color: #0000BB;">29</span></span></span>
<span><span class="co">#&gt; Censoring events: <span style="color: #0000BB;">76</span></span></span></code></pre></div>
<p>We can also extract the MCC estimate at the end of study follow-up
using <code>mcc_final_values(mcc_overall)</code> and/or extract the MCC
values at specific time points (not only the MCC at the end of
follow-up). For example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract key timepoints</span></span>
<span><span class="va">key_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span>, <span class="fl">60</span><span class="op">)</span>  <span class="co"># months</span></span>
<span><span class="va">mcc_at_times</span> <span class="op">&lt;-</span> <span class="va">mcc_overall</span><span class="op">$</span><span class="va">mcc_table</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">time</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">key_times</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    years <span class="op">=</span> <span class="va">time</span> <span class="op">/</span> <span class="fl">12</span>,</span>
<span>    mcc <span class="op">=</span> <span class="fu">cards</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/cards/latest-tag/reference/round5.html" class="external-link">round5</a></span><span class="op">(</span><span class="va">mcc</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">time</span>, <span class="va">mcc</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mcc_at_times</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   years  time   mcc</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   0.5     6 0.391</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   1      12 0.622</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   2      24 1.16 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   3      36 1.64 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>   4      48 2.03 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>   5      60 2.27</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h3>
<p><code>mccount</code> provides flexible plotting capabilities that can
be combined with <code>ggplot2</code> functions/syntax:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Basic plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mcc_overall</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Bladder Cancer Recurrence Burden"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Mean cumulative count over time"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Time (Months)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span></span>
<span>      <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mcc_overall</span><span class="op">$</span><span class="va">mcc_table</span><span class="op">$</span><span class="va">time</span><span class="op">)</span>, </span>
<span>      by <span class="op">=</span> <span class="fl">12</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_line_mcc.html">geom_line_mcc</a></span><span class="op">(</span><span class="va">mcc_overall</span><span class="op">)</span></span></code></pre></div>
<p><img src="mccount_files/figure-html/basic-plot-1.png" width="700"></p>
<p>The step function shows how the expected number of bladder cancer
recurrences accumulates over the entire study follow-up period.</p>
</div>
</div>
<div class="section level2">
<h2 id="mcc-interpretation">MCC Interpretation<a class="anchor" aria-label="anchor" href="#mcc-interpretation"></a>
</h2>
<p>The estimated MCC can be interpreted as the number of events per
person we expect among individuals who have not experienced a competing
risk event by a given time. Looking at the print out from
<code>summary(mcc_overall)</code>, the MCC at the end of follow-up is
2.27 - on average, each bladder cancer survivor experiences 2.27
recurrences by 64 months.</p>
<p>In a population of 100 similar patients, we expect approximately
<code>2.27 * 100 = 227</code> total recurrences by 64 months. This
accounts for the fact that some patients die and cannot experience
further recurrences.</p>
<p>Dong, <em>et al</em>.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Dong H, Robison LL, Leisenring WM, Martin LJ, Armstrong
GT, Yasui Y. Estimating the burden of recurrent events in the presence
of competing risks: the method of mean cumulative count. &lt;em&gt;Am J
Epidemiol&lt;/em&gt;. 2015 Apr 1;181(7):532-40. doi: &lt;a href="https://doi.org/10.1093/aje/kwu289" class="external-link"&gt;10.1093/aje/kwu289&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a> provide additional guidance for
interpreting the MCC (emphasis added):</p>
<blockquote>
<p>Note that MCC is a marginal measure (as opposed to a conditional
measure) of disease burden, similar to [cumulative incidence], and its
interpretation is <em>not</em> conditional on survival free of competing
risk events. Also, MCC does <em>not</em> assume independence between the
event of interest and the competing-risk event.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="stratifying-by-treatment-groups">Stratifying by Treatment Groups<a class="anchor" aria-label="anchor" href="#stratifying-by-treatment-groups"></a>
</h2>
<p>It’s common that we may want to estimate the MCC stratified by a
specific characteristic, like <code>"treatment"</code> group.
<code><a href="../reference/mcc.html">mcc()</a></code> provides a simple <code>by</code> argument to assist
with this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate MCC by treatment group</span></span>
<span><span class="va">mcc_by_treatment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcc.html">mcc</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bladder_mcc</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  time_var <span class="op">=</span> <span class="st">"stop"</span>,</span>
<span>  cause_var <span class="op">=</span> <span class="st">"status"</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"treatment"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"equation"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Found 7 participants where last observation is an event of interest</span></span>
<span><span class="co">#&gt; (`cause_var` = 1)</span></span>
<span><span class="co">#&gt; First 5 IDs: 13, 15, 16, 19, 24</span></span>
<span><span class="co">#&gt; Total affected: 7 participants</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `mcc()` assumes these participants are censored at their final `time_var`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> If participants were actually censored or experienced competing risks after</span></span>
<span><span class="co">#&gt;   their last event, add those observations to ensure correct estimates</span></span>
<span><span class="co">#&gt; Warning: Found 4 participants where last observation is an event of interest</span></span>
<span><span class="co">#&gt; (`cause_var` = 1)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> ID: 51, 64, 67, 70</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `mcc()` assumes these participants are censored at their final `time_var`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> If participants were actually censored or experienced competing risks after</span></span>
<span><span class="co">#&gt;   their last event, add those observations to ensure correct estimates</span></span>
<span><span class="co">#&gt; Warning: Found 2 participants where last observation is an event of interest</span></span>
<span><span class="co">#&gt; (`cause_var` = 1)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> ID: 83, 104</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `mcc()` assumes these participants are censored at their final `time_var`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> If participants were actually censored or experienced competing risks after</span></span>
<span><span class="co">#&gt;   their last event, add those observations to ensure correct estimates</span></span>
<span></span>
<span><span class="co"># Summary by group</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mcc_by_treatment</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Summary of Mean Cumulative Count Results</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Method: <span style="color: #0000BB;">Dong-Yasui Equation Method</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Total participants: <span style="color: #0000BB;">118</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Overall observation period: [<span style="color: #0000BB;">0</span>, <span style="color: #0000BB;">64</span>]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary by Group (</span><span style="color: #0000BB; font-weight: bold;">treatment</span><span style="font-weight: bold;">)</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Group: <span style="color: #0000BB;">placebo</span></span></span>
<span><span class="co">#&gt; Participants in group: <span style="color: #0000BB;">48</span></span></span>
<span><span class="co">#&gt; Group observation period: [<span style="color: #0000BB;">0</span>, <span style="color: #0000BB;">64</span>]</span></span>
<span><span class="co">#&gt; Time to MCC = 1.0: <span style="color: #0000BB;">17</span></span></span>
<span><span class="co">#&gt; Time to maximum MCC: <span style="color: #0000BB;">53</span></span></span>
<span><span class="co">#&gt; MCC at end of follow-up: <span style="color: #0000BB;">2.6137</span></span></span>
<span><span class="co">#&gt; Events of interest: <span style="color: #0000BB;">87</span></span></span>
<span><span class="co">#&gt; Competing risk events: <span style="color: #0000BB;">11</span></span></span>
<span><span class="co">#&gt; Censoring events: <span style="color: #0000BB;">30</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Group: <span style="color: #0000BB;">pyridoxine</span></span></span>
<span><span class="co">#&gt; Participants in group: <span style="color: #0000BB;">32</span></span></span>
<span><span class="co">#&gt; Group observation period: [<span style="color: #0000BB;">0</span>, <span style="color: #0000BB;">60</span>]</span></span>
<span><span class="co">#&gt; Time to MCC = 1.0: <span style="color: #0000BB;">19</span></span></span>
<span><span class="co">#&gt; Time to maximum MCC: <span style="color: #0000BB;">49</span></span></span>
<span><span class="co">#&gt; MCC at end of follow-up: <span style="color: #0000BB;">2.5831</span></span></span>
<span><span class="co">#&gt; Events of interest: <span style="color: #0000BB;">57</span></span></span>
<span><span class="co">#&gt; Competing risk events: <span style="color: #0000BB;">7</span></span></span>
<span><span class="co">#&gt; Censoring events: <span style="color: #0000BB;">21</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Group: <span style="color: #0000BB;">thiotepa</span></span></span>
<span><span class="co">#&gt; Participants in group: <span style="color: #0000BB;">38</span></span></span>
<span><span class="co">#&gt; Group observation period: [<span style="color: #0000BB;">0</span>, <span style="color: #0000BB;">59</span>]</span></span>
<span><span class="co">#&gt; Time to MCC = 1.0: <span style="color: #0000BB;">27</span></span></span>
<span><span class="co">#&gt; Time to maximum MCC: <span style="color: #0000BB;">47</span></span></span>
<span><span class="co">#&gt; MCC at end of follow-up: <span style="color: #0000BB;">1.5463</span></span></span>
<span><span class="co">#&gt; Events of interest: <span style="color: #0000BB;">45</span></span></span>
<span><span class="co">#&gt; Competing risk events: <span style="color: #0000BB;">11</span></span></span>
<span><span class="co">#&gt; Censoring events: <span style="color: #0000BB;">25</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="visualizing-treatment-differences">Visualizing Treatment Differences<a class="anchor" aria-label="anchor" href="#visualizing-treatment-differences"></a>
</h3>
<p>The other functions in <code>mccount</code> automatically recognize
the <code>mcc_grouped</code> S3 class and adjust their behavior
accordingly. For example, we can feed <code>mcc_by_treatment</code> into
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, and it automatically knows to plot an MCC curve by
the stratification variable.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot with treatment groups</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mcc_by_treatment</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Bladder Cancer Recurrence Burden by Treatment"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Mean cumulative count over time"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Time (Months)"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Treatment"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span></span>
<span>      <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mcc_by_treatment</span><span class="op">$</span><span class="va">original_data</span><span class="op">$</span><span class="va">time</span><span class="op">)</span>, </span>
<span>      by <span class="op">=</span> <span class="fl">12</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_line_mcc.html">geom_line_mcc</a></span><span class="op">(</span><span class="va">mcc_by_treatment</span><span class="op">)</span></span></code></pre></div>
<p><img src="mccount_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Confidence intervals for the MCC can be generated via
bootstrapping.</p>
</div>
</div>
<div class="section level2">
<h2 id="weighted-mcc-analysis">Weighted MCC Analysis<a class="anchor" aria-label="anchor" href="#weighted-mcc-analysis"></a>
</h2>
<p><code>mccount</code> also allows estimation of weighted MCC in the
setting of observational studies that want to account for measured
confounding and/or other types of bias via matching or weighting. See
the <code><a href="../articles/estimating-mcc-after-matching-or-weighting.html">vignette("estimating-mcc-after-matching-or-weighting")</a></code>
for more details.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kenneth A. Taylor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
